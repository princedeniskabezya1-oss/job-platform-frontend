<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employer Dashboard | AIFT</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#2557a7;
  --light:#edf2fc;
  --dark:#1c1c1c;
  --gray:#6f6f6f;
  --bg:#f8f9fa;
  --white:#ffffff;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Inter',sans-serif;
}

body{
  background:var(--bg);
}

/* HEADER */
.header{
  background:white;
  padding:15px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

.logo{
  font-size:26px;
  font-weight:800;
}

.logo span:first-child{
  color:#2557a7;
}

.header input{
  width:40%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ddd;
}

/* LAYOUT */
.container{
  display:grid;
  grid-template-columns:280px 1fr 320px;
  gap:20px;
  padding:30px 40px;
}

/* LEFT PANEL */
.sidebar{
  background:white;
  border-radius:14px;
  padding:20px;
  box-shadow:0 4px 15px rgba(0,0,0,0.05);
}

.sidebar h3{
  margin-bottom:15px;
}

.sidebar button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border:none;
  border-radius:8px;
  background:var(--primary);
  color:white;
  cursor:pointer;
}

/* CENTER FEED */
.feed{
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* CREATE POST */
.create-post{
  background:white;
  padding:20px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,0.05);
}

.create-post textarea{
  width:100%;
  border:1px solid #ddd;
  border-radius:8px;
  padding:10px;
  margin-bottom:10px;
}

.create-post input{
  margin-bottom:10px;
}

.create-post button{
  background:var(--primary);
  color:white;
  padding:8px 16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

/* POSTS */
.post{
  background:white;
  padding:20px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,0.05);
}

.post img,
.post video{
  width:100%;
  border-radius:10px;
  margin-top:10px;
}

/* RIGHT PANEL */
.right{
  background:white;
  padding:20px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,0.05);
}

</style>
</head>

<body>

<div class="header">
  <div class="logo">
    <span>AI</span>FT
  </div>

  <input type="text" placeholder="Search jobs, posts, talents">

  <button onclick="logout()">Logout</button>
</div>

<div class="container">

  <!-- LEFT -->
  <div class="sidebar">
    <h3>Employer Panel</h3>

    <button onclick="loadMyJobs()">My Jobs</button>
    <button onclick="loadApplications()">Applications</button>
    <button onclick="upgradePro()">Upgrade to Pro</button>
  </div>

  <!-- CENTER -->
  <div class="feed">

    <div class="create-post">
      <h3>Create Post</h3>
      <textarea id="postContent" placeholder="Share something..."></textarea>
      <input type="text" id="imageUrl" placeholder="Image URL (Pro)">
      <input type="text" id="videoUrl" placeholder="Video URL (Pro)">
      <button onclick="createPost()">Post</button>
    </div>

    <div id="postsContainer"></div>

  </div>

  <!-- RIGHT -->
  <div class="right">
    <h3>Company Info</h3>
    <p id="companyName"></p>
    <p id="companyHeadline"></p>
  </div>

</div>

<script>

const API="https://backend-1-9b6f.onrender.com";
const token=localStorage.getItem("token");

if(!token){
  window.location.href="login.html";
}

async function loadPosts(){
  const res=await fetch(API+"/api/posts");
  const posts=await res.json();

  let html="";

  posts.forEach(post=>{
    html+=`
      <div class="post">
        <strong>${post.author?.name || ""}</strong>
        <p>${post.content}</p>

        ${post.image ? `<img src="${post.image}">` : ""}
        ${post.video ? `<video controls src="${post.video}"></video>` : ""}
      </div>
    `;
  });

  document.getElementById("postsContainer").innerHTML=html;
}

async function createPost(){

  const content=document.getElementById("postContent").value;
  const image=document.getElementById("imageUrl").value;
  const video=document.getElementById("videoUrl").value;

  await fetch(API+"/api/posts",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"Bearer "+token
    },
    body:JSON.stringify({content,image,video})
  });

  loadPosts();
}

function logout(){
  localStorage.removeItem("token");
  window.location.href="login.html";
}

loadPosts();

</script>

</body>
</html>
