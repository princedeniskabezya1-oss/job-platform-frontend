<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AIFT Employer</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --linkedin-blue:#0A66C2;
  --linkedin-dark:#004182;
  --bg:#F3F2EF;
  --card:#FFFFFF;
  --border:#E0E0E0;
  --text:#000;
  --muted:#666;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Inter',sans-serif;
}

body{
  background:var(--bg);
}

/* HEADER */
.header{
  background:white;
  padding:12px 40px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid var(--border);
  position:sticky;
  top:0;
  z-index:100;
}

.logo{
  font-size:24px;
  font-weight:800;
  color:var(--linkedin-blue);
}

.header input{
  width:400px;
  padding:8px 12px;
  border-radius:6px;
  border:1px solid var(--border);
}

/* LAYOUT */
.container{
  display:grid;
  grid-template-columns: 250px 1fr 300px;
  gap:20px;
  padding:30px 80px;
}

/* PROFILE CARD */
.profile-card{
  background:var(--card);
  border-radius:10px;
  border:1px solid var(--border);
  overflow:hidden;
}

.banner{
  height:70px;
  background:linear-gradient(135deg,#0A66C2,#004182);
}

.avatar{
  width:70px;
  height:70px;
  border-radius:50%;
  background:#ccc;
  margin:-35px auto 10px auto;
  border:3px solid white;
}

.profile-content{
  text-align:center;
  padding:10px;
}

.pro-badge{
  background:gold;
  padding:3px 8px;
  border-radius:20px;
  font-size:12px;
  font-weight:600;
}

/* FEED */
.feed-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:10px;
  padding:15px;
  margin-bottom:20px;
}

.post-box textarea{
  width:100%;
  border:none;
  resize:none;
  outline:none;
  font-size:14px;
}

.post-actions{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
}

.btn{
  background:var(--linkedin-blue);
  color:white;
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
}

.btn:hover{
  background:var(--linkedin-dark);
}

/* RIGHT SIDEBAR */
.pro-box{
  background:var(--card);
  padding:15px;
  border:1px solid var(--border);
  border-radius:10px;
}

.pro-box h3{
  margin-bottom:10px;
}
</style>
</head>

<body>

<div class="header">
  <div class="logo">AIFT</div>
  <input placeholder="Search jobs, employers, talents">
  <button class="btn">Logout</button>
</div>

<div class="container">

  <!-- LEFT -->
  <div class="profile-card">
    <div class="banner"></div>
    <div class="avatar"></div>
    <div class="profile-content">
      <h4 id="profileName">Employer Name</h4>
      <p style="color:var(--muted)">Company Name</p>
      <br>
      <span class="pro-badge">PRO</span>
    </div>
  </div>

  <!-- CENTER FEED -->
  <div>

    <!-- POST BOX -->
    <div class="feed-card post-box">
      <textarea id="postContent" rows="3" placeholder="Share something..."></textarea>
      <div class="post-actions">
        <div>
          <input type="file" id="mediaInput">
        </div>
        <button class="btn" onclick="createPost()">Post</button>
      </div>
    </div>

    <!-- POSTS -->
    <div id="feed"></div>

  </div>

  <!-- RIGHT -->
  <div class="pro-box">
    <h3>Upgrade to Pro</h3>
    <p>Post videos, images and get more visibility.</p>
    <br>
    <button class="btn" onclick="upgradePro()">Activate Pro</button>
  </div>

</div>

<script>
const API="https://backend-1-9b6f.onrender.com";
const token=localStorage.getItem("token");

async function loadFeed(){
  const res=await fetch(API+"/api/posts");
  const posts=await res.json();

  let html="";
  posts.forEach(p=>{
    html+=`
    <div class="feed-card">
      <strong>${p.author?.name || "User"}</strong>
      <p>${p.content || ""}</p>
      ${p.mediaUrl ? 
        p.mediaType==="video" ?
        `<video controls width="100%"><source src="${p.mediaUrl}"></video>` :
        `<img src="${p.mediaUrl}" width="100%">`
      : ""}
      <br><br>
      <button onclick="likePost('${p._id}')">Like (${p.likes.length})</button>
    </div>
    `;
  });

  document.getElementById("feed").innerHTML=html;
}

async function createPost(){
  const content=document.getElementById("postContent").value;
  const file=document.getElementById("mediaInput").files[0];

  const formData=new FormData();
  formData.append("content",content);
  if(file) formData.append("media",file);

  await fetch(API+"/api/posts",{
    method:"POST",
    headers:{Authorization:"Bearer "+token},
    body:formData
  });

  loadFeed();
}

async function likePost(id){
  await fetch(API+"/api/posts/"+id+"/like",{
    method:"PATCH",
    headers:{Authorization:"Bearer "+token}
  });

  loadFeed();
}

async function upgradePro(){
  await fetch(API+"/api/users/upgrade-pro",{
    method:"PATCH",
    headers:{Authorization:"Bearer "+token}
  });
  alert("Pro Activated");
}

loadFeed();
</script>

</body>
</html>
