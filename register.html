<!DOCTYPE html>
<html>
<head>
<title>Register | HireFlow</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:#f4f6fb;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.box{
  width:420px;
  background:white;
  padding:40px;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(0,0,0,0.15);
}

h2{
  margin-bottom:20px;
}

input, select{
  width:100%;
  padding:12px;
  margin-bottom:15px;
  border-radius:8px;
  border:1px solid #ddd;
}

button{
  width:100%;
  padding:14px;
  background:#2557a7;
  color:white;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}

button:hover{
  background:#1e3c72;
}

.footer{
  margin-top:15px;
  font-size:14px;
}

.footer a{
  color:#2557a7;
  text-decoration:none;
}

.message{
  margin-top:10px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="box">
<h2>Create Account</h2>

<input type="text" id="name" placeholder="Full Name">
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">

<select id="role">
  <option value="talent">Job Seeker</option>
  <option value="employer">Employer</option>
  <option value="agent">Agent</option>
</select>

<button onclick="register()">Register</button>

<p class="message" id="message"></p>

<div class="footer">
Already have an account? <a href="login.html">Login</a>
</div>

</div>

<script>
const API = "https://backend-1-9b6f.onrender.com";

async function register(){
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const role = document.getElementById("role").value;
  const messageBox = document.getElementById("message");

  messageBox.innerText = "Creating account...";

  try{
    const res = await fetch(API + "/api/auth/register",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({name,email,password,role})
    });

    const data = await res.json();

    if(res.status === 201){
      messageBox.style.color="green";
      messageBox.innerText="Account created successfully! Redirecting...";
      setTimeout(()=> window.location.href="login.html",2000);
    }else{
      messageBox.style.color="red";
      messageBox.innerText=data.message || "Registration failed";
    }

  }catch(err){
    messageBox.style.color="red";
    messageBox.innerText="Server is waking up... please try again.";
  }
}
</script>


</body>
</html>
