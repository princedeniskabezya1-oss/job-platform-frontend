<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Profile | AIFT</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{
  background:#f3f2ef;
  font-family:'Inter',sans-serif;
}

.container{
  max-width:900px;
  margin:40px auto;
}

.card{
  background:white;
  border-radius:12px;
  box-shadow:0 4px 15px rgba(0,0,0,0.05);
  overflow:hidden;
}

.banner{
  width:100%;
  height:220px;
  object-fit:cover;
}

.profile-section{
  padding:20px;
}

.avatar{
  width:140px;
  height:140px;
  border-radius:50%;
  border:4px solid white;
  margin-top:-70px;
  object-fit:cover;
}

.follow-btn{
  background:#0a66c2;
  color:white;
  border:none;
  padding:8px 18px;
  border-radius:20px;
  font-weight:600;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="container">
  <div class="card">

    <img id="banner" class="banner">

    <div class="profile-section">

      <img id="avatar" class="avatar">

      <h2 id="name"></h2>
      <p id="headline"></p>
      <p id="bio"></p>

      <button class="follow-btn" onclick="followUser()">Follow</button>

    </div>
  </div>
</div>

<script>
const API="https://backend-1-9b6f.onrender.com";
const token=localStorage.getItem("token");

const params = new URLSearchParams(window.location.search);
const userId = params.get("id");

async function loadProfile(){
  const res = await fetch(API+"/api/users/"+userId+"/public");
  const user = await res.json();

  document.getElementById("banner").src = user.bannerImage || "";
  document.getElementById("avatar").src = user.profileImage || "";
  document.getElementById("name").innerText = user.name;
  document.getElementById("headline").innerText = user.headline || "";
  document.getElementById("bio").innerText = user.bio || "";
}

async function followUser(){
  await fetch(API+"/api/users/"+userId+"/follow",{
    method:"POST",
    headers:{
      Authorization:"Bearer "+token
    }
  });
  alert("Followed!");
}

loadProfile();
</script>

</body>
</html>
